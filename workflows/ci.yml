name: CI


on:
pull_request:
push:
branches: [ main ]


jobs:
build-and-test:
runs-on: ubuntu-latest
permissions:
contents: read
steps:
-name: Checkout
uses: actions/checkout@v4


-name: Use Node.js
uses: actions/setup-node@v4
with:
node-version: '20'
cache: 'npm'


-name: Install deps
run: npm ci


-name: Lint
run: npm run lint


-name: Test
run: npm test --run


-name: Build
run: npm run build


-name: Upload build artifact
uses: actions/upload-artifact@v4
with:
name: dist
path: dist